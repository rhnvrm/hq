# hq Walkthrough

> **Note**: This file is auto-generated by `scripts/generate_walkthrough.sh`.
> Do not edit manually - run the script to regenerate.

hq is a lightweight command-line HUML processor with jq-compatible syntax.
It reads JSON, YAML, or HUML input and outputs proper HUML format by default.

## Table of Contents

- [Installation](#installation)
- [Basic Usage](#basic-usage)
- [Identity and Field Access](#identity-and-field-access)
- [Array Operations](#array-operations)
- [Pipe and Filters](#pipe-and-filters)
- [Operators](#operators)
- [Built-in Functions](#built-in-functions)
- [Output Formats](#output-formats)
- [Real-World Examples](#real-world-examples)

## Installation

```bash
# Build from source
go build -o hq ./cmd/hq/

# Or install
go install github.com/huml-lang/hq/cmd/hq@latest
```

## Basic Usage

```bash
# Show help
hq --help

# Process JSON input
echo '{"name": "Alice"}' | hq '.'

# Process with null input (for calculations)
hq -n '1 + 2 + 3'

# Output as JSON instead of HUML
echo '{"name": "Alice"}' | hq -o json '.'
```

## Identity and Field Access

The identity operator `.` returns the input unchanged.
Field access uses `.fieldname` syntax.

### Identity

```bash
$ echo '{"name": "Alice", "age": 30}' | hq '.'
%HUML v0.2.0
age: 30
name: "Alice"
```

### Field Access

```bash
$ echo '{"name": "Alice", "age": 30}' | hq '.name'
%HUML v0.2.0
"Alice"
```

```bash
$ echo '{"name": "Alice", "age": 30}' | hq '.age'
%HUML v0.2.0
30
```

### Bracket Notation

Use bracket notation for keys with special characters:

```bash
$ echo '{"first name": "Alice"}' | hq '.["first name"]'
%HUML v0.2.0
"Alice"
```

## Array Operations

### Indexing

```bash
$ echo '["a", "b", "c", "d", "e"]' | hq '.[0]'
%HUML v0.2.0
"a"
```

```bash
$ echo '["a", "b", "c", "d", "e"]' | hq '.[2]'
%HUML v0.2.0
"c"
```

```bash
$ echo '["a", "b", "c", "d", "e"]' | hq '.[-1]'
%HUML v0.2.0
"e"
```

### Slicing

```bash
$ echo '["a", "b", "c", "d", "e"]' | hq '.[1:4]'
%HUML v0.2.0
- "b"
- "c"
- "d"
```

```bash
$ echo '["a", "b", "c", "d", "e"]' | hq '.[:3]'
%HUML v0.2.0
- "a"
- "b"
- "c"
```

```bash
$ echo '["a", "b", "c", "d", "e"]' | hq '.[-2:]'
%HUML v0.2.0
- "d"
- "e"
```

### Iterator

The iterator `.[]\ expands arrays into multiple outputs:

```bash
$ echo '[1, 2, 3]' | hq '.[]'
%HUML v0.2.0
1

%HUML v0.2.0
2

%HUML v0.2.0
3
```

For objects, it returns all values:

```bash
$ echo '{"a": 1, "b": 2, "c": 3}' | hq '.[]'
%HUML v0.2.0
1

%HUML v0.2.0
2

%HUML v0.2.0
3
```

## Pipe and Filters

### Pipe Operator

Chain operations with `|`:

```bash
$ echo '[1, 2, 3, 4, 5]' | hq '.[] | . * 2'
%HUML v0.2.0
2

%HUML v0.2.0
4

%HUML v0.2.0
6

%HUML v0.2.0
8

%HUML v0.2.0
10
```

### Select

Filter values with `select(condition)`:

```bash
$ echo '[1, 2, 3, 4, 5]' | hq '.[] | select(. > 2)'
%HUML v0.2.0
3

%HUML v0.2.0
4

%HUML v0.2.0
5
```

```bash
$ echo '[{"name": "Alice", "age": 30}, {"name": "Bob", "age": 20}]' | hq '.[] | select(.age > 25) | .name'
%HUML v0.2.0
"Alice"
```

## Operators

### Arithmetic

```bash
$ hq -n '2 + 3'
%HUML v0.2.0
5
```

```bash
$ hq -n '10 - 4'
%HUML v0.2.0
6
```

```bash
$ hq -n '6 * 7'
%HUML v0.2.0
42
```

```bash
$ hq -n '20 / 4'
%HUML v0.2.0
5
```

```bash
$ hq -n '17 % 5'
%HUML v0.2.0
2
```

```bash
$ hq -n '2 + 3 * 4'
%HUML v0.2.0
14
```

```bash
$ hq -n '(2 + 3) * 4'
%HUML v0.2.0
20
```

### Comparison

```bash
$ hq -n '5 > 3'
%HUML v0.2.0
true
```

```bash
$ hq -n '5 < 3'
%HUML v0.2.0
false
```

```bash
$ hq -n '5 == 5'
%HUML v0.2.0
true
```

```bash
$ hq -n '5 != 3'
%HUML v0.2.0
true
```

```bash
$ hq -n '5 >= 5'
%HUML v0.2.0
true
```

```bash
$ hq -n '5 <= 4'
%HUML v0.2.0
false
```

### Boolean

```bash
$ hq -n 'true and false'
%HUML v0.2.0
false
```

```bash
$ hq -n 'true or false'
%HUML v0.2.0
true
```

```bash
$ hq -n 'true | not'
%HUML v0.2.0
false
```

```bash
$ hq -n 'null | not'
%HUML v0.2.0
true
```

## Built-in Functions

### Type and Length

```bash
$ echo '"hello"' | hq 'type'
%HUML v0.2.0
"string"
```

```bash
$ echo '[1, 2, 3]' | hq 'type'
%HUML v0.2.0
"array"
```

```bash
$ echo '{"a": 1}' | hq 'type'
%HUML v0.2.0
"object"
```

```bash
$ echo '[1, 2, 3, 4, 5]' | hq 'length'
%HUML v0.2.0
5
```

```bash
$ echo '"hello world"' | hq 'length'
%HUML v0.2.0
11
```

### Keys and Values

```bash
$ echo '{"name": "Alice", "age": 30}' | hq 'keys'
%HUML v0.2.0
- "age"
- "name"
```

### Array Functions

```bash
$ echo '[3, 1, 4, 1, 5, 9, 2, 6]' | hq 'sort'
%HUML v0.2.0
- 1
- 1
- 2
- 3
- 4
- 5
- 6
- 9
```

```bash
$ echo '[1, 2, 2, 3, 3, 3, 4]' | hq 'unique'
%HUML v0.2.0
- 1
- 2
- 3
- 4
```

```bash
$ echo '[1, 2, 3, 4, 5]' | hq 'reverse'
%HUML v0.2.0
- 5
- 4
- 3
- 2
- 1
```

```bash
$ echo '[1, 2, 3, 4, 5]' | hq 'first'
%HUML v0.2.0
1
```

```bash
$ echo '[1, 2, 3, 4, 5]' | hq 'last'
%HUML v0.2.0
5
```

### Add

```bash
$ echo '[1, 2, 3, 4, 5]' | hq 'add'
%HUML v0.2.0
15
```

```bash
$ echo '[[1, 2], [3, 4], [5]]' | hq 'add'
%HUML v0.2.0
- 1
- 2
- 3
- 4
- 5
```

```bash
$ echo '["hello", " ", "world"]' | hq 'add'
%HUML v0.2.0
"hello world"
```

### Map

```bash
$ echo '[1, 2, 3]' | hq 'map(. * 10)'
%HUML v0.2.0
- 10
- 20
- 30
```

```bash
$ echo '[1, 2, 3, 4, 5]' | hq 'map(. * . )'
%HUML v0.2.0
- 1
- 4
- 9
- 16
- 25
```

### String Functions

```bash
$ echo '"hello world"' | hq 'ascii_upcase'
%HUML v0.2.0
"HELLO WORLD"
```

```bash
$ echo '"HELLO WORLD"' | hq 'ascii_downcase'
%HUML v0.2.0
"hello world"
```

```bash
$ echo '"hello,world,foo,bar"' | hq 'split(",")'
%HUML v0.2.0
- "hello"
- "world"
- "foo"
- "bar"
```

```bash
$ echo '["hello", "world"]' | hq 'join(" ")'
%HUML v0.2.0
"hello world"
```

```bash
$ echo '"hello world"' | hq 'startswith("hello")'
%HUML v0.2.0
true
```

```bash
$ echo '"hello world"' | hq 'endswith("world")'
%HUML v0.2.0
true
```

## Output Formats

### HUML (default)

```bash
$ echo '{"users": [{"name": "Alice"}, {"name": "Bob"}]}' | hq '.'
%HUML v0.2.0
users::
  - ::
    name: "Alice"
  - ::
    name: "Bob"
```

### JSON

```bash
$ echo '{"name": "Alice", "age": 30}' | hq -o json '.'
{
  "age": 30,
  "name": "Alice"
}
```

### Compact JSON

```bash
$ echo '{"name": "Alice", "age": 30}' | hq -o json -c '.'
{"age":30,"name":"Alice"}
```

### YAML

```bash
$ echo '{"name": "Alice", "age": 30}' | hq -o yaml '.'
age: 30
name: Alice
```

### Raw Output

Use `-r` to output strings without quotes:

```bash
$ echo '{"name": "Alice"}' | hq -r '.name'
Alice
```

## Real-World Examples

### Extract User Names

```bash
$ echo '{"users": [{"name": "Alice", "role": "admin"}, {"name": "Bob", "role": "user"}]}' | hq '.users[].name'
%HUML v0.2.0
name: "Alice"
role: "admin"

%HUML v0.2.0
name: "Bob"
role: "user"
```

### Filter Active Users

```bash
$ echo '[{"name": "Alice", "active": true}, {"name": "Bob", "active": false}, {"name": "Carol", "active": true}]' | hq '.[] | select(.active) | .name'
%HUML v0.2.0
"Alice"

%HUML v0.2.0
"Carol"
```

### Transform Data

```bash
$ echo '{"firstName": "Alice", "lastName": "Smith"}' | hq '{name: .firstName, surname: .lastName}'
%HUML v0.2.0
name: "Alice"
surname: "Smith"
```

### Calculate Statistics

```bash
$ echo '[10, 20, 30, 40, 50]' | hq 'add'
%HUML v0.2.0
150
```

```bash
$ echo '[10, 20, 30, 40, 50]' | hq 'length'
%HUML v0.2.0
5
```

### Process Config Files

```bash
# Read a HUML config and extract values
cat config.huml | hq '.database.host'

# Convert JSON config to HUML
cat config.json | hq '.' > config.huml

# Convert HUML to JSON
cat config.huml | hq -o json '.' > config.json
```

---

*Generated by `scripts/generate_walkthrough.sh` on 2026-01-21 12:54:22 UTC*
